<div class="container" [formGroup]="form">
  <div class="left-pane">
    <mat-form-field appearance="fill">
      <mat-label>Name</mat-label>
      <input matInput placeholder="Name" formControlName="name">
    </mat-form-field>

    <mat-form-field appearance="fill" class="description">
      <mat-label>Description</mat-label>
      <textarea matInput #text maxlength="300" rows="4" placeholder="Short Description" formControlName="description">
        </textarea>
      <mat-hint align="end">{{ text.value.length }} / 300</mat-hint>
    </mat-form-field>

    <div class="path">
      <button mat-flat-button (click)="addStep()" color="accent" class="add-payment">
        <span>Step</span>
        <mat-icon>add</mat-icon>
      </button>
      <mat-vertical-stepper #paidStepper>
        <ng-container formArrayName="path">
          <div *ngFor="let step of formService.pathArray.controls; index as i">
            <mat-step [stepControl]="step">
              <ng-container [formGroupName]="i">
                <ng-template matStepLabel>
                  {{ i == 0 ? 'Start' : i ==  formService.pathArray.length - 1 ? 'End' : 'Step'}}
                  <button matSuffix mat-icon-button aria-label="Clear" (click)="deleteStep(i)">
                    <mat-icon>close</mat-icon>
                  </button>
                </ng-template>
                <div class="fields">
                  <mat-form-field appearance="fill">
                    <mat-label> Latitude</mat-label>
                    <input type="number" matInput placeholder="Latitude" formControlName="latitude">
                  </mat-form-field>
                  <mat-form-field appearance="fill">
                    <mat-label> Longitude</mat-label>
                    <input type="number" matInput placeholder="Longitude" formControlName="longitude">
                  </mat-form-field>
                  <mat-form-field appearance="fill">
                    <mat-label> Location name</mat-label>
                    <input matInput placeholder="Locations name" formControlName="locationName">
                  </mat-form-field>
                </div>
              </ng-container>
            </mat-step>
          </div>
        </ng-container>
      </mat-vertical-stepper>
    </div>

    <div class="info">
      <p>
        <strong>last update: </strong>
        <span>{{ form.get(['timestamps', 'updated_at'])?.value | date: 'full' }}</span>
      </p>
      <p>
        <strong>last seen: </strong>
        <span>[Latitude: {{ form.get(['lastSeen', 'latitude'])?.value}}, </span>
        <span>Longitude: {{ form.get(['lastSeen', 'longitude'])?.value}}, </span>
        <span>Location: {{ form.get(['lastSeen', 'locationName'])?.value}} ]</span>
      </p>
      <p>
        <strong>views: </strong>
        <span>{{ form.get(['views'])?.value }}</span>
      </p>
      <p>
        <strong>completed steps: </strong>
        <span>{{ form.get(['completedSteps'])?.value }}</span>
      </p>
    </div>
  </div>
</div>
